<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings</title>
  <link rel="stylesheet" href="../system/css/main.css">
  <meta name="author" content="Bg.uhm by rhap5ody">
  <meta name="keywords" content="fun, library, github, rhap5ody">
  <script src="../system/js/settings.js" defer></script>
</head>
<body>

  <!-- Header -->
  <header>
    <nav class="nav-links">
      <a href="system/pages/home.html">Home</a>
      <a href="system/pages/favorite.html">Favorites</a>
      <a href="system/pages/discover.html">Discovery</a>
      <a href="system/pages/settings.html">Settings</a>
      <a href="system/pages/support.html">Support</a>
      <a href="system/pages/info.html">Info</a>

      <div class="pages-anchor">
        <button class="arrowleft" onclick="prevPage()"><img src="system/icons/left.png" alt="Previous Page"></button>
        <span class="page-indicator">...</span>
        <button class="arrowright" onclick="nextPage()"><img src="system/icons/right.png" alt="Next Page"></button>
      </div>
    </nav>

    <div class="header-controls">
      <div class="search-box">
        <input type="text" id="searchInputHeader" placeholder="Search games..." />
        <button id="searchBtnHeader"><img src="system/icons/search.png" alt="Search"></button>
      </div>
      <p id="gameCountInfo"></p>
      <a href="system/pages/profile.html"><img src="system/icons/profile.png" alt="profile" id="pfp"></a>
      <img src="system/icons/dashboard.png" alt="Dashboard" id="dashboardBtn">
    </div>
  </header>

  <!-- Dashboard Menu -->
  <div id="dashboardMenu" class="dashboard-menu">
    <a href="system/pages/profile.html">Profile</a>
    <a href="system/pages/favorite.html">Favorites</a>
    <a href="system/pages/settings.html">Settings</a>
    <a href="system/pages/support.html">Support</a>
    <a href="system/pages/info.html">Info</a>
    <a href="system/pages/version-log.html">Version Log</a>
  </div>

  <!-- Main Settings Container -->
  <main style="padding:20px; max-width:800px; margin:0 auto;">
    <h1 class="page-title">Settings</h1>

    <!-- Cloak Mode -->
    <section class="setting">
      <h2>Cloak Mode</h2>
      <div class="cloak-buttons">
        <button onclick="setCloak('Google Docs','icons/docs.png')">Google Docs</button>
        <button onclick="setCloak('Canvas','icons/canvas.png')">Canvas</button>
        <button onclick="setCloak('Clever','icons/clever.png')">Clever</button>
        <button onclick="setCloak('New Tab','icons/newtab.png')">New Tab</button>
        <button onclick="resetCloak()">Reset</button>
      </div>
      <label for="customCloakUrl">Custom Cloak Image URL:</label>
      <input type="text" id="customCloakUrl" placeholder="Paste favicon URL">
      <label for="customCloakTitle">Custom Cloak Title:</label>
      <input type="text" id="customCloakTitle" placeholder="Enter custom tab title">
      <button class="save-btn" onclick="saveCustomCloak()">Save Custom Cloak</button>
    </section>

    <!-- Theme Customization -->
    <section class="setting">
      <h2>Customize Theme</h2>
      <label for="bgColor">Background Color:</label>
      <input type="color" id="bgColor">
      <label for="marqueeColor">Marquee Text Color:</label>
      <input type="color" id="marqueeColor">
      <label for="headerColor">Header Background:</label>
      <input type="color" id="headerColor">
      <label for="footerColor">Footer Background:</label>
      <input type="color" id="footerColor">
      <button class="save-btn" onclick="saveTheme()">Save Theme</button>
      <button class="return-btn" onclick="window.location.href='https://theworldpt1.github.io/index.html'">Return to Page</button>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <a href="system/pages/sources.html">sources</a>
    <a href="system/pages/contributors.html">contribute</a>
    <a href="system/pages/discord.html">Discord</a>
    <a href="system/pages/bugsNfixes.html">Bugs & fixes</a>
    <a href="system/pages/contact.html">Socials</a>
    <a href="system/pages/version-log.html">version V0.7.2</a>
  </footer>

  <!-- Scripts -->
  <script>
    // === Dashboard Menu Logic ===
    document.addEventListener("DOMContentLoaded", () => {
      const dashboardBtn = document.getElementById("dashboardBtn");
      const dashboardMenu = document.getElementById("dashboardMenu");

      if (!dashboardBtn || !dashboardMenu) return;

      dashboardMenu.style.display = "none";
      dashboardMenu.style.opacity = 0;
      dashboardMenu.style.transition = "opacity 0.3s ease";

      dashboardBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        const isVisible = dashboardMenu.style.display === "block";
        if (isVisible) {
          dashboardMenu.style.opacity = 0;
          setTimeout(() => (dashboardMenu.style.display = "none"), 300);
        } else {
          dashboardMenu.style.display = "block";
          setTimeout(() => (dashboardMenu.style.opacity = 1), 10);
        }
      });

      document.addEventListener("click", (e) => {
        if (!dashboardMenu.contains(e.target) && e.target !== dashboardBtn) {
          if (dashboardMenu.style.display === "block") {
            dashboardMenu.style.opacity = 0;
            setTimeout(() => (dashboardMenu.style.display = "none"), 300);
          }
        }
      });
    });

    // === Cloak Logic ===
    function setCloak(title, icon) {
      localStorage.setItem("cloakTitle", title);
      localStorage.setItem("cloakIcon", icon);
      alert("Cloak set to " + title);
    }
    function resetCloak() {
      localStorage.removeItem("cloakTitle");
      localStorage.removeItem("cloakIcon");
      alert("Cloak reset.");
    }
    function saveCustomCloak() {
      const url = document.getElementById("customCloakUrl").value.trim();
      const title = document.getElementById("customCloakTitle").value.trim();
      if (url && title) {
        localStorage.setItem("cloakTitle", title);
        localStorage.setItem("cloakIcon", url);
        alert("Custom cloak saved!");
      } else alert("Please provide both a title and image URL.");
    }

    // === Theme Logic ===
    function saveTheme() {
      const theme = {
        bgColor: document.getElementById("bgColor").value,
        marqueeColor: document.getElementById("marqueeColor").value,
        headerColor: document.getElementById("headerColor").value,
        footerColor: document.getElementById("footerColor").value
      };
      localStorage.setItem("customTheme", JSON.stringify(theme));
      localStorage.setItem("theme", "custom");
      alert("Theme saved!");
    }

    document.addEventListener("DOMContentLoaded", () => {
      const savedTheme = JSON.parse(localStorage.getItem("customTheme") || "{}");
      if (savedTheme.bgColor) document.body.style.backgroundColor = savedTheme.bgColor;
      if (savedTheme.headerColor) document.querySelector("header").style.backgroundColor = savedTheme.headerColor;
      if (savedTheme.footerColor) document.querySelector("footer").style.backgroundColor = savedTheme.footerColor;
    });
  </script>
</body>
</html>
