<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üß© JSON Image Path Checker</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #121212;
      color: #eee;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: #4da3ff;
    }
    #results {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    .card {
      background: #1e1e1e;
      border-radius: 8px;
      padding: 10px;
      width: 200px;
      text-align: center;
      border: 2px solid transparent;
      transition: border-color 0.3s;
    }
    .card img {
      width: 180px;
      height: 100px;
      object-fit: cover;
      border-radius: 6px;
      background: #222;
    }
    .ok {
      border-color: #38d978;
    }
    .fail {
      border-color: #e04e4e;
    }
    .card p {
      margin: 8px 0 0;
      font-size: 0.85rem;
      color: #aaa;
    }
    .status {
      font-size: 0.9rem;
      margin-top: 5px;
    }
    button {
      display: block;
      margin: 0 auto;
      background: #4da3ff;
      border: none;
      color: white;
      padding: 0.6rem 1.2rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: background 0.2s;
    }
    button:hover {
      background: #2c8aff;
    }
  </style>
</head>
<body>
  <h1>üß© JSON Image Path Checker</h1>
  <button id="runCheck">Run Image Check</button>
  <div id="results"></div>

  <script>
    const jsonPath = "system/json/assets.json"; // <-- change if needed
    const results = document.getElementById("results");
    const btn = document.getElementById("runCheck");

    btn.addEventListener("click", async () => {
      results.innerHTML = "";
      btn.disabled = true;
      btn.textContent = "Checking images...";

      try {
        const res = await fetch(jsonPath);
        if (!res.ok) throw new Error("Failed to load JSON");
        const data = await res.json();

        let valid = 0, broken = 0;

        for (const game of data) {
          const card = document.createElement("div");
          card.className = "card";
          const img = new Image();

          const title = game.title || "Untitled";
          const src = game.image || "";

          const label = document.createElement("p");
          label.textContent = title;
          const status = document.createElement("div");
          status.className = "status";
          status.textContent = "Checking...";

          img.src = src;
          img.onload = () => {
            card.classList.add("ok");
            status.textContent = "‚úÖ OK";
            valid++;
            console.log(`‚úÖ [${title}] OK ‚Üí ${src}`);
          };
          img.onerror = () => {
            card.classList.add("fail");
            img.src = "https://raw.githubusercontent.com/theworldpt1/theworldpt1.github.io/main/system/images/404_blank.png";
            status.textContent = "‚ùå Broken";
            broken++;
            console.warn(`‚ùå [${title}] Broken ‚Üí ${src}`);
          };

          card.appendChild(img);
          card.appendChild(label);
          card.appendChild(status);
          results.appendChild(card);
        }

        setTimeout(() => {
          console.log(`‚úÖ Working: ${valid} | ‚ùå Broken: ${broken}`);
          btn.disabled = false;
          btn.textContent = "Run Again";
        }, 3000);
      } catch (err) {
        console.error(err);
        results.innerHTML = `<p style="color:#f55;">‚ö† Failed to load JSON file.</p>`;
        btn.disabled = false;
        btn.textContent = "Try Again";
      }
    });
  </script>
</body>
</html>
