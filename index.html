<!DOCTYPE html>
<html>
  <head>
    <title>Test 001</title>
    <link rel="icon" href="system/images/bguhm.png" />
    <link rel="stylesheet" href="system/css/main.css" />
    <link rel="stylesheet" href="system/css/quote.css" />
    <link rel="stylesheet" href="system/css/themes.css" />
    <link rel="stylesheet" href="system/css/commands.css" />
    <meta name="author" content="Bg.uhm by rhap5ody" />
    <meta name="keywords" content="fun, library, github, rhap5ody" />
    <script src="system/js/quote.js" defer></script> 
    <script src="system/js/settings.js" defer></script>
    <script src="system/js/searcherror.js" defer></script> 
    <script src="system/js/carousel.js" defer></script> 
    <script src="system/js/commands.js" defer></script> 
    <!--Creates Discord Widget-->
    <script src="https://cdn.jsdelivr.net/npm/@widgetbot/crate@3" async defer>
      new Crate({
          server: '1273329263923302430', // server
          channel: '1329289920845713471' // #channels
      })
    </script>
  </head>
  <body>

  <!-- Nav anchors / links -->
<header>
  <nav class="nav-links">
    <a href="system/pages/home.html">Home</a>
    <a href="system/pages/favorite.html">Favorites</a>
    <a href="system/pages/discover.html">Discovery</a>
    <a href="system/pages/settings.html">Settings</a>
    <a href="system/pages/support.html">Support</a>
    <a href="system/pages/info.html">Info</a>

    <!-- Pages control -->
    <div class="pages-anchor">
      <button class="arrowleft" onclick="prevPage()">
        <img src="system/icons/left.png" alt="Previous Page">
      </button>
      <span class="page-indicator">pages</span> <a>Pages</a>
      <button class="arrowright" onclick="nextPage()">
        <img src="system/icons/right.png" alt="Next Page">
      </button>
    </div>
  </nav>

  <!-- Search / profile / dashboard grouped -->
  <div class="header-controls">
    <div class="search-box">
      <input type="text" id="searchInputHeader" placeholder="Search games..." />
      <button id="searchBtnHeader">
        <img src="search3.png" alt="Search" />
      </button>
    </div>	  
    <a href="system/pages/profile.html"><img src="profile.png" alt="profile" id="pfp" /></a>
    <img src="system/icons/dashboard.png" alt="Dashboard" id="dashboardBtn" />
  </div>
</header>
	  <!-- Make-shift Marquee -->
  <div id="quoteWrapper">
    <p id="quoteBox"></p>
  </div>
	  
<main>
  <div id="container">loading assets...</div>
</main>

<button id="toTopBtn">⬆ Top</button>
<footer>
  <a href="system/pages/sources.html">sources</a>
  <a href="system/pages/contributors.html">contribute</a>
  <a href="system/pages/discord.html">Discord</a>
  <a href="system/pages/bugsNfixes.html">Bugs & fixes</a>
  <a href="system/pages/contact.html">Socials</a>
  <!-- ==VERSION UPDATES== -->
  <a href="system/pages/version-log.html">version V0.7.2</a>
</footer>

<div id="dashboardMenu" class="dashboard-menu">
  <a href="music-player.html">Music Player</a>
  <a href="system/pages/settings-themes.html">Themes</a>
  <a href="system/pages/credits.html">Credits</a>
  <a href="system/pages/alt.html">Alternative Links</a>
</div>

<!-- ========== Dashboard toggle ========== -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const dashboardBtn = document.getElementById("dashboardBtn");
    const dashboardMenu = document.getElementById("dashboardMenu");

    dashboardBtn.onclick = function () {
      dashboardMenu.style.display = dashboardMenu.style.display === "flex" ? "none" : "flex";
    };

    window.addEventListener("click", function (e) {
      if (!dashboardBtn.contains(e.target) && !dashboardMenu.contains(e.target)) {
        dashboardMenu.style.display = "none";
      }
    });
  });
</script>

<!-- ========== Scroll-to-top button ========== -->
<script>
  const toTopBtn = document.getElementById("toTopBtn");

  window.onscroll = function () {
    if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 200) {
      toTopBtn.style.display = "block";
    } else {
      toTopBtn.style.display = "none";
    }
  };

  toTopBtn.onclick = function () {
    window.scrollTo({
      top: 0,
      behavior: "smooth",
    });
  };

  toTopBtn.addEventListener("dblclick", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

<!-- ========== Search filter ========== -->
<script>
  function filterGames(query) {
    const input = query.toLowerCase();
    const games = document.querySelectorAll("#container > div");

    games.forEach((game) => {
      const title = game.querySelector("h3")?.textContent.toLowerCase() || "";
      const author = game.querySelector("p")?.textContent.toLowerCase() || "";
      game.style.display = title.includes(input) || author.includes(input) ? "block" : "none";
    });
  }

  document.getElementById("searchInputHeader").addEventListener("keyup", function () {
    filterGames(this.value);
  });

  document.getElementById("searchBtnHeader").addEventListener("click", function () {
    const query = document.getElementById("searchInputHeader").value;
    filterGames(query);
  });
</script>

<!-- ========== JSON Loader ========== -->
<script>
async function loadGames() {
  const container = document.getElementById("container");
  container.textContent = "Loading games...";

  try {
    const response = await fetch("system/json/assets-test.json");
    if (!response.ok) throw new Error("Failed to load JSON");
    const games = await response.json();

    container.innerHTML = "";
    games.forEach(game => {
      const gameDiv = document.createElement("div");
      gameDiv.className = "game-card";

      gameDiv.innerHTML = `
        <a href="${game.link}" target="_blank">
          <img src="${game.image}" alt="${game.title}">
          <h3>${game.title}</h3>
        </a>
        <p>${game.author}</p>
        <p>Status: ${game.status}</p>
        <p>Page: ${game.page}</p>
      `;

      container.appendChild(gameDiv);
    });
  } catch (err) {
    container.textContent = "⚠ Failed to load game list.";
    console.error(err);
  }
}

document.addEventListener("DOMContentLoaded", loadGames);
</script>

</body>
</html>
